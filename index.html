<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bee Swarm Fan Hub</title>
<style>
body { font-family: Arial, sans-serif; background: #fff8e6; margin:0; color:#222; }
.container { max-width:900px; margin:auto; padding:20px; }
h1,h2,h3 { color:#b8860b; }
a { text-decoration:none; color:#333; }
.cards { display:flex; gap:20px; margin-top:20px; flex-wrap:wrap; }
.card { padding:20px; background:white; border-radius:10px; flex:1; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.06); cursor:pointer; }
input, textarea, select, button { display:block; margin:10px 0; padding:8px; width:100%; max-width:300px; }
button { background:#ffd54a; border:none; border-radius:8px; cursor:pointer; }
.hive-grid { display:grid; grid-template-columns:repeat(10,40px); grid-gap:4px; margin-top:10px; }
.hive-grid div { width:40px; height:40px; background:#fff7df; border:1px solid #f2daa0; display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:11px; text-align:center; border-radius:4px; }
.page { display:none; }
.page.active { display:block; }
nav button { margin-right:8px; cursor:pointer; }
.tooltip { position: relative; display: inline-block; border-bottom: 1px dotted black; }
.tooltip .tooltiptext { visibility: hidden; width: 200px; background-color: #555; color: #fff; text-align: left; border-radius: 6px; padding: 5px; position: absolute; z-index: 1; bottom: 125%; left: 50%; margin-left: -100px; opacity: 0; transition: opacity 0.3s; }
.tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
table { border-collapse: collapse; width: 100%; }
table, th, td { border: 1px solid #ccc; }
th, td { padding: 8px; text-align: left; }
</style>
</head>
<body>
<div class="container">
  <h1>Bee Swarm Fan Hub</h1>
  <nav>
    <button data-page="home">Home</button>
    <button data-page="profile">Profile</button>
    <button data-page="hive">Hive Builder</button>
    <button data-page="guides">Guides</button>
  </nav>

  <!-- Home Page -->
  <div id="home" class="page active">
    <p>Welcome! Create, share, and showcase Bee Swarm Simulator hives, guides, and player profiles.</p>
    <div class="cards">
      <div class="card" data-page="profile">Profile / Lookup</div>
      <div class="card" data-page="hive">Hive Builder</div>
      <div class="card" data-page="guides">Guides & Bees</div>
    </div>
  </div>

  <!-- Profile Page -->
  <div id="profile" class="page">
    <h2>Player Profile / Lookup</h2>
    <label>Username:</label><input id="username" type="text" placeholder="Enter username">
    <label>Honey:</label><input id="honey" type="text" placeholder="Honey amount">
    <label>Notes:</label><textarea id="notes" placeholder="Any notes"></textarea>
    <button id="saveProfile">Save Locally</button>
    <button id="loadProfile">Load Locally</button>
    <h3>Hive Preview</h3>
    <div id="hivePreview" class="hive-grid"></div>

    <h3>Player Lookup</h3>
    <label>Search Username:</label>
    <input id="lookupUsername" type="text" placeholder="Enter username to lookup">
    <button id="searchPlayer">Search</button>
    <div id="lookupResult"></div>
  </div>

  <!-- Hive Builder Page -->
  <div id="hive" class="page">
    <h2>Hive Builder</h2>
    <label>Select Bee:</label>
    <select id="selectedBee"><option value="">-- Select a bee --</option></select>
    <button id="clearHive">Clear Hive</button>
    <div id="hiveGrid" class="hive-grid"></div>
  </div>

  <!-- Guides Page -->
  <div id="guides" class="page">
    <h2>Guides & Bees</h2>
    <label>Search:</label><input id="search" type="text" placeholder="Search quests, bees, items">
    
    <h3>Honey Farming</h3>
    <table id="honeyTable">
      <tr><th>Field</th><th>Best Bees</th><th>Pollen</th><th>Honey/hour</th></tr>
    </table>
    
    <h3>Events / Seasonal Tips</h3>
    <ul id="eventsList"></ul>

    <h3>Equipment / Items</h3>
    <ul id="equipmentList"></ul>

    <h3>Hive Setup / Tips</h3>
    <ul id="hiveTips"></ul>

    <h3>Bees</h3>
    <ul id="beeList"></ul>
  </div>
</div>

<script>
// --- Page Navigation ---
document.querySelectorAll('button[data-page], .card[data-page]').forEach(el=>{
  el.addEventListener('click', ()=>{
    const page = el.dataset.page;
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(page).classList.add('active');
  });
});

// --- Bee Data ---
const bees = [
  {name:"Basic Bee", type:"Collector", rarity:"Common", ability:"+1 pollen", notes:"Starter bee", wiki:"https://bee-swarm-simulator.fandom.com/wiki/Basic_Bee"},
  {name:"Brave Bee", type:"Fighter", rarity:"Rare", ability:"+1 bear damage", notes:"Good early-game fighter", wiki:"https://bee-swarm-simulator.fandom.com/wiki/Brave_Bee"},
  {name:"Rad Bee", type:"Collector", rarity:"Epic", ability:"+2 pollen", notes:"Great for midgame", wiki:"https://bee-swarm-simulator.fandom.com/wiki/Rad_Bee"},
  {name:"Bubble Bee", type:"Support", rarity:"Epic", ability:"Protects other bees", notes:"Helps survive Bear attacks", wiki:"https://bee-swarm-simulator.fandom.com/wiki/Bubble_Bee"}
];

// Populate bee select dropdown
const beeSelect = document.getElementById('selectedBee');
bees.forEach(b=>{
  let opt = document.createElement('option'); opt.value=b.name; opt.textContent=b.name;
  beeSelect.appendChild(opt);
});

// --- Hive Builder ---
function initHive(gridElId){
  const gridEl = document.getElementById(gridElId);
  let hive = JSON.parse(localStorage.getItem('hive')||'[]');
  if(hive.length<50) hive = Array(50).fill(null);
  function render(){
    gridEl.innerHTML='';
    hive.forEach((b,i)=>{
      let cell=document.createElement('div');
      cell.textContent = b || "+";
      cell.addEventListener('click', ()=>{
        const selected = beeSelect.value;
        if(selected) hive[i]=selected; else hive[i]=null;
        localStorage.setItem('hive', JSON.stringify(hive));
        render(); renderHivePreview();
      });
      gridEl.appendChild(cell);
    });
  }
  render();
  document.getElementById('clearHive').addEventListener('click', ()=>{
    hive = Array(50).fill(null);
    localStorage.setItem('hive', JSON.stringify(hive));
    render(); renderHivePreview();
  });
}
initHive('hiveGrid');

// --- Profile System ---
const usernameInput=document.getElementById('username');
const honeyInput=document.getElementById('honey');
const notesInput=document.getElementById('notes');
const saveProfile=document.getElementById('saveProfile');
const loadProfile=document.getElementById('loadProfile');
const hivePreview=document.getElementById('hivePreview');

function renderHivePreview(){
  if(!hivePreview) return;
  const profile = JSON.parse(localStorage.getItem('profile')||'{}');
  const hive = profile.hive || JSON.parse(localStorage.getItem('hive')||'[]');
  hivePreview.innerHTML='';
  hive.forEach(b=>{
    let cell=document.createElement('div');
    cell.textContent = b || "+";
    cell.style.width='28px'; cell.style.height='28px'; cell.style.display='inline-flex';
    cell.style.alignItems='center'; cell.style.justifyContent='center';
    cell.style.margin='1px'; cell.style.background='#fff7df';
    cell.style.border='1px solid #f2daa0'; cell.style.borderRadius='2px';
    hivePreview.appendChild(cell);
  });
}

saveProfile.addEventListener('click', ()=>{
  const profile={username:usernameInput.value,honey:honeyInput.value,notes:notesInput.value,hive:JSON.parse(localStorage.getItem('hive')||'[]')};
  localStorage.setItem('profile',JSON.stringify(profile));
  alert('Profile saved locally!');
  renderHivePreview();
});
loadProfile.addEventListener('click', ()=>{
  const profile = JSON.parse(localStorage.getItem('profile')||'{}');
  if(profile.username) usernameInput.value=profile.username;
  if(profile.honey) honeyInput.value=profile.honey;
  if(profile.notes) notesInput.value=profile.notes;
  renderHivePreview();
});

// --- Player Lookup ---
const lookupUsernameInput = document.getElementById('lookupUsername');
const searchPlayerBtn = document.getElementById('searchPlayer');
const lookupResult = document.getElementById('lookupResult');

searchPlayerBtn.addEventListener('click', ()=>{
    const searchName = lookupUsernameInput.value.trim();
    if(!searchName) { lookupResult.innerHTML = "<p>Please enter a username.</p>"; return; }

    const savedProfile = JSON.parse(localStorage.getItem('profile') || '{}');

    if(savedProfile.username && savedProfile.username.toLowerCase() === searchName.toLowerCase()){
        let html = `<h4>${savedProfile.username}'s Profile</h4>`;
        html += `<p>Honey: ${savedProfile.honey || "0"}</p>`;
        html += `<p>Notes: ${savedProfile.notes || "None"}</p>`;
        html += `<h5>Hive:</h5><div style="display:grid;grid-template-columns:repeat(10,30px);gap:2px;">`;
        savedProfile.hive.forEach(b => {
            html += `<div style="width:28px;height:28px;background:#fff7df;border:1px solid #f2daa0;display:flex;align-items:center;justify-content:center;font-size:11px;">${b || "+"}</div>`;
        });
        html += `</div>`;
        lookupResult.innerHTML = html;
    } else {
        lookupResult.innerHTML = "<p>Player not found in local storage.</p>";
    }
});

// --- Guides Data ---
const honeyFarms = [
  {field:"Dewdrop Plains", bestBees:["Basic Bee","Rad Bee"], pollen:"Red Poppy", honeyPerHour:"50-80"},
  {field:"Twin Peaks", bestBees:["Brave Bee","Bubble Bee"], pollen:"Bluebell", honeyPerHour:"80-120"}
];
const events = [
  {name:"Spring Event", tips:"Use Bubble Bee to protect low-level bees. Collect event pollen for rewards."},
  {name:"Halloween Event", tips:"Rascal and Looker bees are most effective. Watch out for ghost bears."}
];
const equipment = [
  {item:"Standard Backpack", notes:"Increases pollen capacity."},
  {item:"Field Boost", notes:"Temporary pollen multiplier."}
];
const hiveTips = [
  "Place high-buff bees in the top row for maximum efficiency.",
  "Reserve center slots for support bees."
];

// --- Render Honey Farming ---
const honeyTable=document.getElementById('honeyTable');
honeyFarms.forEach(f=>{
  const row=honeyTable.insertRow();
  row.insertCell().textContent=f.field;
  row.insertCell().textContent=f.bestBees.join(", ");
  row.insertCell().textContent=f.pollen;
  row.insertCell().textContent=f.honeyPerHour;
});

// --- Render Events / Equipment / Hive Tips ---
const eventsList=document.getElementById('eventsList');
events.forEach(e=>{
  const li=document.createElement('li'); li.textContent=`${e.name}: ${e.tips}`;
  eventsList.appendChild(li);
});

const equipmentList=document.getElementById('equipmentList');
equipment.forEach(eq=>{
  const li=document.createElement('li'); li.textContent=`${eq.item}: ${eq.notes}`;
  equipmentList.appendChild(li);
});

const hiveTipsEl=document.getElementById('hiveTips');
hiveTips.forEach(tip=>{
  const li=document.createElement('li'); li.textContent=tip;
  hiveTipsEl.appendChild(li);
});

// --- Render Bee List with Hover & Wiki ---
const beeListEl=document.getElementById('beeList');
bees.forEach(b=>{
  const li=document.createElement('li');
  li.innerHTML=`<span class="tooltip">${b.name}
    <span class="tooltiptext">
      Type: ${b.type}<br>Rarity: ${b.rarity}<br>Ability: ${b.ability}<br>Notes: ${b.notes}<br>
      <a href="${b.wiki}" target="_blank">Wiki Link</a>
    </span>
  </span>`;
  beeListEl.appendChild(li);
});

// --- Search Filter ---
const searchInput=document.getElementById('search');
searchInput.addEventListener('input', ()=>{
  const term = searchInput.value.toLowerCase();
  // Filter bees
  beeListEl.querySelectorAll('li').forEach(li=>{
    li.style.display = li.textContent.toLowerCase().includes(term) ? "" : "none";
  });
  // Filter events
  eventsList.querySelectorAll('li').
